{"version":3,"sources":["utils.ts"],"names":["getAppbarColor","theme","elevation","customBackground","elevated","isV3","dark","isDarkTheme","mode","colors","isAdaptiveMode","surface","primary","mix","rgb","string","DEFAULT_APPBAR_HEIGHT","MD3_DEFAULT_APPBAR_HEIGHT","modeAppbarHeight","small","medium","large","modeTextVariant","renderAppbarContent","children","isDark","shouldCenterContent","renderOnly","renderExcept","React","Children","toArray","filter","child","includes","type","map","i","isValidElement","AppbarContent","AppbarAction","AppbarBackAction","props","color","undefined","white","black","style","styles","v3Spacing","v2Spacing","centerAlignedContent","cloneElement","StyleSheet","create","alignItems","marginLeft"],"mappings":"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","sourcesContent":["import React from 'react';\nimport color from 'color';\nimport { StyleSheet } from 'react-native';\nimport type { ColorValue, StyleProp, ViewStyle } from 'react-native';\nimport AppbarContent from './AppbarContent';\nimport AppbarAction from './AppbarAction';\nimport AppbarBackAction from './AppbarBackAction';\nimport overlay from '../../styles/overlay';\nimport type { Theme } from '../../types';\nimport { black, white } from '../../styles/themes/v2/colors';\n\nexport type AppbarModes = 'small' | 'medium' | 'large' | 'center-aligned';\n\nexport const getAppbarColor = (\n  theme: Theme,\n  elevation: number,\n  customBackground?: ColorValue,\n  elevated?: boolean\n) => {\n  const { isV3, dark: isDarkTheme, mode, colors } = theme;\n  const isAdaptiveMode = mode === 'adaptive';\n  if (customBackground) {\n    return customBackground;\n  }\n\n  if (!isV3) {\n    if (isDarkTheme && isAdaptiveMode) {\n      return overlay(elevation, colors?.surface);\n    }\n\n    return colors.primary;\n  }\n\n  if (elevated) {\n    return color(colors.surface)\n      .mix(color(colors.primary), 0.08)\n      .rgb()\n      .string();\n  }\n\n  return colors.surface;\n};\n\ntype RenderAppbarContentProps = {\n  children: React.ReactNode;\n  isDark: boolean;\n  shouldCenterContent?: boolean;\n  isV3: boolean;\n  renderOnly?: React.ReactNode[];\n  renderExcept?: React.ReactNode[];\n  mode?: AppbarModes;\n};\n\nexport const DEFAULT_APPBAR_HEIGHT = 56;\nconst MD3_DEFAULT_APPBAR_HEIGHT = 64;\n\nexport const modeAppbarHeight = {\n  small: MD3_DEFAULT_APPBAR_HEIGHT,\n  medium: 112,\n  large: 152,\n  'center-aligned': MD3_DEFAULT_APPBAR_HEIGHT,\n};\n\nexport const modeTextVariant = {\n  small: 'titleLarge',\n  medium: 'headlineSmall',\n  large: 'headlineMedium',\n  'center-aligned': 'titleLarge',\n};\n\nexport const renderAppbarContent = ({\n  children,\n  isDark,\n  shouldCenterContent = false,\n  isV3,\n  renderOnly,\n  renderExcept,\n  mode = 'small',\n}: RenderAppbarContentProps) => {\n  return (\n    React.Children.toArray(children)\n      .filter((child) => child != null && typeof child !== 'boolean')\n      .filter((child) =>\n        // @ts-expect-error: TypeScript complains about the type of type but it doesn't matter\n        renderExcept ? !renderExcept.includes(child.type) : child\n      )\n      // @ts-expect-error: TypeScript complains about the type of type but it doesn't matter\n      .filter((child) => (renderOnly ? renderOnly.includes(child.type) : child))\n      .map((child, i) => {\n        if (\n          !React.isValidElement(child) ||\n          ![AppbarContent, AppbarAction, AppbarBackAction].includes(\n            // @ts-expect-error: TypeScript complains about the type of type but it doesn't matter\n            child.type\n          )\n        ) {\n          return child;\n        }\n\n        const props: {\n          color?: string;\n          style?: StyleProp<ViewStyle>;\n          mode?: AppbarModes;\n        } = {\n          color: isV3\n            ? undefined\n            : typeof child.props.color !== 'undefined'\n            ? child.props.color\n            : isDark\n            ? white\n            : black,\n        };\n\n        if (child.type === AppbarContent) {\n          props.mode = mode;\n          props.style = [\n            isV3\n              ? i === 0 && !shouldCenterContent && styles.v3Spacing\n              : i !== 0 && styles.v2Spacing,\n            shouldCenterContent && styles.centerAlignedContent,\n            child.props.style,\n          ];\n        }\n        return React.cloneElement(child, props);\n      })\n  );\n};\n\nconst styles = StyleSheet.create({\n  centerAlignedContent: {\n    alignItems: 'center',\n  },\n  v2Spacing: {\n    marginLeft: 8,\n  },\n  v3Spacing: {\n    marginLeft: 12,\n  },\n});\n"]}
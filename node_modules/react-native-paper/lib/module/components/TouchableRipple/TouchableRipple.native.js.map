{"version":3,"sources":["TouchableRipple.native.tsx"],"names":["React","Platform","TouchableHighlight","TouchableNativeFeedback","View","StyleSheet","withTheme","getTouchableRippleColors","ANDROID_VERSION_LOLLIPOP","ANDROID_VERSION_PIE","TouchableRipple","style","background","borderless","disabled","disabledProp","rippleColor","underlayColor","children","theme","rest","onPress","calculatedRippleColor","calculatedUnderlayColor","useForeground","OS","Version","supported","Ripple","styles","overflowHidden","Children","only","create","overflow"],"mappings":";;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAGEC,QAHF,EAIEC,kBAJF,EAKEC,uBALF,EAOEC,IAPF,EASEC,UATF,QAUO,cAVP;AAWA,SAASC,SAAT,QAA0B,oBAA1B;AAEA,SAASC,wBAAT,QAAyC,SAAzC;AAEA,MAAMC,wBAAwB,GAAG,EAAjC;AACA,MAAMC,mBAAmB,GAAG,EAA5B;;AAcA,MAAMC,eAAe,GAAG,QAUX;AAAA,MAVY;AACvBC,IAAAA,KADuB;AAEvBC,IAAAA,UAFuB;AAGvBC,IAAAA,UAAU,GAAG,KAHU;AAIvBC,IAAAA,QAAQ,EAAEC,YAJa;AAKvBC,IAAAA,WALuB;AAMvBC,IAAAA,aANuB;AAOvBC,IAAAA,QAPuB;AAQvBC,IAAAA,KARuB;AASvB,OAAGC;AAToB,GAUZ;AACX,QAAMN,QAAQ,GAAGC,YAAY,IAAI,CAACK,IAAI,CAACC,OAAvC;AACA,QAAM;AAAEC,IAAAA,qBAAF;AAAyBC,IAAAA;AAAzB,MACJhB,wBAAwB,CAAC;AACvBY,IAAAA,KADuB;AAEvBH,IAAAA,WAFuB;AAGvBC,IAAAA;AAHuB,GAAD,CAD1B,CAFW,CASX;AACA;;AACA,QAAMO,aAAa,GACjBvB,QAAQ,CAACwB,EAAT,KAAgB,SAAhB,IACAxB,QAAQ,CAACyB,OAAT,IAAoBjB,mBADpB,IAEAI,UAHF;;AAKA,MAAIH,eAAe,CAACiB,SAApB,EAA+B;AAC7B,wBACE,oBAAC,uBAAD,eACMP,IADN;AAEE,MAAA,QAAQ,EAAEN,QAFZ;AAGE,MAAA,aAAa,EAAEU,aAHjB;AAIE,MAAA,UAAU,EACRZ,UAAU,IAAI,IAAd,GACIA,UADJ,GAEIT,uBAAuB,CAACyB,MAAxB,CAA+BN,qBAA/B,EAAsDT,UAAtD;AAPR,qBAUE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE,CAACA,UAAU,IAAIgB,MAAM,CAACC,cAAtB,EAAsCnB,KAAtC;AAAb,OACGX,KAAK,CAAC+B,QAAN,CAAeC,IAAf,CAAoBd,QAApB,CADH,CAVF,CADF;AAgBD;;AAED,sBACE,oBAAC,kBAAD,eACME,IADN;AAEE,IAAA,QAAQ,EAAEN,QAFZ;AAGE,IAAA,KAAK,EAAE,CAACD,UAAU,IAAIgB,MAAM,CAACC,cAAtB,EAAsCnB,KAAtC,CAHT;AAIE,IAAA,aAAa,EAAEY;AAJjB,MAMGvB,KAAK,CAAC+B,QAAN,CAAeC,IAAf,CAAoBd,QAApB,CANH,CADF;AAUD,CAvDD;;AAyDAR,eAAe,CAACiB,SAAhB,GACE1B,QAAQ,CAACwB,EAAT,KAAgB,SAAhB,IAA6BxB,QAAQ,CAACyB,OAAT,IAAoBlB,wBADnD;AAGA,MAAMqB,MAAM,GAAGxB,UAAU,CAAC4B,MAAX,CAAkB;AAC/BH,EAAAA,cAAc,EAAE;AACdI,IAAAA,QAAQ,EAAE;AADI;AADe,CAAlB,CAAf;AAMA,eAAe5B,SAAS,CAACI,eAAD,CAAxB","sourcesContent":["import * as React from 'react';\nimport {\n  BackgroundPropType,\n  StyleProp,\n  Platform,\n  TouchableHighlight,\n  TouchableNativeFeedback,\n  TouchableWithoutFeedback,\n  View,\n  ViewStyle,\n  StyleSheet,\n} from 'react-native';\nimport { withTheme } from '../../core/theming';\nimport type { Theme } from '../../types';\nimport { getTouchableRippleColors } from './utils';\n\nconst ANDROID_VERSION_LOLLIPOP = 21;\nconst ANDROID_VERSION_PIE = 28;\n\ntype Props = React.ComponentProps<typeof TouchableWithoutFeedback> & {\n  borderless?: boolean;\n  background?: BackgroundPropType;\n  disabled?: boolean;\n  onPress?: () => void | null;\n  rippleColor?: string;\n  underlayColor?: string;\n  children: React.ReactNode;\n  style?: StyleProp<ViewStyle>;\n  theme: Theme;\n};\n\nconst TouchableRipple = ({\n  style,\n  background,\n  borderless = false,\n  disabled: disabledProp,\n  rippleColor,\n  underlayColor,\n  children,\n  theme,\n  ...rest\n}: Props) => {\n  const disabled = disabledProp || !rest.onPress;\n  const { calculatedRippleColor, calculatedUnderlayColor } =\n    getTouchableRippleColors({\n      theme,\n      rippleColor,\n      underlayColor,\n    });\n\n  // A workaround for ripple on Android P is to use useForeground + overflow: 'hidden'\n  // https://github.com/facebook/react-native/issues/6480\n  const useForeground =\n    Platform.OS === 'android' &&\n    Platform.Version >= ANDROID_VERSION_PIE &&\n    borderless;\n\n  if (TouchableRipple.supported) {\n    return (\n      <TouchableNativeFeedback\n        {...rest}\n        disabled={disabled}\n        useForeground={useForeground}\n        background={\n          background != null\n            ? background\n            : TouchableNativeFeedback.Ripple(calculatedRippleColor, borderless)\n        }\n      >\n        <View style={[borderless && styles.overflowHidden, style]}>\n          {React.Children.only(children)}\n        </View>\n      </TouchableNativeFeedback>\n    );\n  }\n\n  return (\n    <TouchableHighlight\n      {...rest}\n      disabled={disabled}\n      style={[borderless && styles.overflowHidden, style]}\n      underlayColor={calculatedUnderlayColor}\n    >\n      {React.Children.only(children)}\n    </TouchableHighlight>\n  );\n};\n\nTouchableRipple.supported =\n  Platform.OS === 'android' && Platform.Version >= ANDROID_VERSION_LOLLIPOP;\n\nconst styles = StyleSheet.create({\n  overflowHidden: {\n    overflow: 'hidden',\n  },\n});\n\nexport default withTheme(TouchableRipple);\n"]}